(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6930:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(7294),o="react-tag-input",a="react-tag-input__input",i="react-tag-input__tag",c="react-tag-input__tag__content",u="react-tag-input__tag__remove",s="react-tag-input__tag__remove-readonly";var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function p(e){return function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return l[e]}))}(function(e){return e.replace(/(\r\n|\n|\r)/gm,"")}(e))}var d=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.focused=!1,t.removed=!1,t.preFocusedValue="",t.onPaste=function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,p(t))},t.onFocus=function(){t.preFocusedValue=t.getValue(),t.focused=!0},t.onBlur=function(){t.focused=!1;var e=t.props.innerEditableRef.current,n=t.props,r=n.validator,o=n.change;if(!t.removed&&e){if(""===e.innerText)return void t.props.remove();if(r)if(!r(t.getValue()))return void(e.innerText=t.preFocusedValue);o(e.innerText)}},t.onKeyDown=function(e){if(13===e.keyCode)return e.preventDefault(),void t.focusInputRef();var n=t.props.removeOnBackspace,r=t.getValue();return n&&8===e.keyCode&&""===r?(t.removed=!0,t.props.remove(),void t.focusInputRef()):void 0},t.getValue=function(){var e=t.getRef();return e?e.innerText:""},t.getRef=function(){return t.props.innerEditableRef.current},t.focusInputRef=function(){var e=t.props.inputRef;e&&e.current&&e.current.focus()},t}return d(t,e),t.prototype.componentDidMount=function(){this.preFocusedValue=this.getValue()},t.prototype.render=function(){var e=this.props,t=e.value,n=e.className,o=e.innerEditableRef;return r.createElement("div",{ref:o,className:n,contentEditable:!0,onPaste:this.onPaste,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,dangerouslySetInnerHTML:{__html:p(t)}})},t}(r.Component),v=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.innerEditableRef=r.createRef(),t.remove=function(){return t.props.remove(t.props.index)},t}return v(t,e),t.prototype.render=function(){var e=this.props,t=e.value,n=e.index,o=e.editable,a=e.inputRef,l=e.validator,p=e.update,d=e.readOnly,v=e.removeOnBackspace,h=d?u+" "+s:u;return r.createElement("div",{className:i},!o&&r.createElement("div",{className:c},t),o&&r.createElement(f,{value:t,inputRef:a,innerEditableRef:this.innerEditableRef,className:c,change:function(e){return p(n,e)},remove:this.remove,validator:l,removeOnBackspace:v}),r.createElement("div",{className:h,onClick:this.remove}))},t}(r.Component),m=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={input:""},t.inputRef=r.createRef(),t.onInputChange=function(e){t.setState({input:e.target.value})},t.onInputKeyDown=function(e){var n=t.state.input,r=t.props,o=r.validator,a=r.removeOnBackspace;if(13===e.keyCode){if(e.preventDefault(),""===n)return;if(!(void 0===o||o(n)))return;t.addTag(n)}else if(a&&(8===e.keyCode||46===e.keyCode)){if(""!==n)return;t.removeTag(t.props.tags.length-1)}},t.addTag=function(e){var n=t.props.tags.slice();n.push(e),t.props.onChange(n),t.setState({input:""})},t.removeTag=function(e){var n=t.props.tags.slice();n.splice(e,1),t.props.onChange(n)},t.updateTag=function(e,n){var r=t.props.tags.slice();r[e]=n,t.props.onChange(r)},t}return m(t,e),t.prototype.render=function(){var e=this,t=this.state.input,n=this.props,i=n.tags,c=n.placeholder,u=n.maxTags,s=n.editable,l=n.readOnly,p=n.validator,d=n.removeOnBackspace,f=void 0!==u&&i.length>=u,v=!l&&(s||!1),m=!l&&!f;return r.createElement("div",{className:o},i.map((function(t,n){return r.createElement(h,{key:n,value:t,index:n,editable:v,readOnly:l||!1,inputRef:e.inputRef,update:e.updateTag,remove:e.removeTag,validator:p,removeOnBackspace:d})})),m&&r.createElement("input",{ref:this.inputRef,value:t,className:a,placeholder:c||"Type and press enter",onChange:this.onInputChange,onKeyDown:this.onInputKeyDown}))},t}(r.Component),g=_},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5869)}])},5869:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(4051),o=n.n(r),a=n(5893),i=n(7294),c=n(9762),u=n(2846),s=n(4244),l=n(5031),p=n(8554),d=n.n(p);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var h=["children","placeholder","className"],m=["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize","isFullWidth"],_=["children"],g=(0,u.Gp)((function(e,t){var n=e.children,r=e.placeholder,o=e.className,a=v(e,h);return i.createElement(u.m$.select,f({},a,{ref:t,className:(0,l.cx)("chakra-select",o)}),r&&i.createElement("option",{value:""},r),n)}));l.Ts&&(g.displayName="SelectField");var y=(0,u.Gp)((function(e,t){var n=(0,u.jC)("Select",e),r=(0,u.Lr)(e),o=r.rootProps,a=r.placeholder,p=r.icon,h=r.color,_=r.height,y=r.h,x=r.minH,E=r.minHeight,w=r.iconColor,C=r.iconSize;r.isFullWidth;var b=v(r,m),N=(0,l.Vl)(b,s.oE),j=N[0],k=N[1],R=(0,c.Yp)(k),S={width:"100%",height:"fit-content",position:"relative",color:h},T=d()({paddingEnd:"2rem"},n.field,{_focus:{zIndex:"unset"}});return i.createElement(u.m$.div,f({className:"chakra-select__wrapper",__css:S},j,o),i.createElement(g,f({ref:t,height:null!=y?y:_,minH:null!=x?x:E,placeholder:a},R,{__css:T}),e.children),i.createElement(O,f({"data-disabled":(0,l.PB)(R.disabled)},(w||h)&&{color:w||h},{__css:n.icon},C&&{fontSize:C}),p))}));l.Ts&&(y.displayName="Select");var x=function(e){return i.createElement("svg",f({viewBox:"0 0 24 24"},e),i.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))},E=(0,u.m$)("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),O=function(e){var t=e.children,n=void 0===t?i.createElement(x,null):t,r=v(e,_),o=i.cloneElement(n,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return i.createElement(E,f({},r,{className:"chakra-select__icon-wrapper"}),i.isValidElement(n)?o:null)};l.Ts&&(O.displayName="SelectIcon");var w=n(4612),C=n(6723),b=n(5321),N=n(179),j=n(2844),k=n.n(j),R=n(5651),S=n(6930),T=(n(8652),n(9789)),P=n(3854);function I(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,o)}function D(){var e=(0,i.useState)([]),t=e[0],n=e[1],r=(0,i.useState)(""),c=(r[0],r[1],(0,i.useState)([])),u=c[0],s=c[1],l=((0,i.useContext)(T.S),(0,i.useState)(null)),p=l[0],d=l[1],f=(0,i.useState)(""),v=(f[0],f[1],(0,i.useState)([])),h=(v[0],v[1],(0,i.useState)("")),m=(h[0],h[1],(0,i.useRef)(null)),_=(0,i.useRef)(null);(0,i.useEffect)((function(){(0,P.Aj)(N.I8,(function(e){if(e){var t=e.uid;d(t)}console.log("search authUser.uid",p),g()}))}),[]);var g=function(){var e,n=(e=o().mark((function e(){var n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,b.ad)(),r=[],console.log(t),!(t.length>0)){e.next=9;break}return a=(0,b.IO)((0,b.hJ)(n,"tags"),(0,b.ar)("tag_name","in",t)),e.next=7,(0,b.PL)(a);case 7:e.sent.forEach((function(e){console.log(e.id," => ",e.data()),r.push(e.data().article_id)}));case 9:console.log(r),i=null,i=r.length>0?(0,b.IO)((0,b.hJ)(n,"articles"),(0,b.ar)("article_id","in",r),(0,b.Xo)("created_at","desc")):(0,b.IO)((0,b.hJ)(n,"articles"),(0,b.Xo)("created_at","desc")),(0,b.PL)(i).then((function(e){var t=new Array;e.docs.forEach((function(e){var n={};n.id=e.id,n.title=e.data().title,n.content=e.data().content,n.orgUrl=e.data().url,n.favCount=e.data().fav_count,t.push(n)})),s(t)}));case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){I(a,r,o,i,c,"next",e)}function c(e){I(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:k().page,children:[(0,a.jsxs)("div",{className:k().search,children:[(0,a.jsx)(w.II,{ref:m,placeholder:"",size:"lg",id:"seachKeyword"}),(0,a.jsx)(C.zx,{onClick:function(e){var n=e.target;n.name,n.value;console.log(m.current.value),console.log(t),console.log(_.current.value),g()},children:"\u691c\u7d22"})]}),(0,a.jsxs)("div",{className:k()["search-detail"],children:[(0,a.jsx)(S.Z,{tags:t,onChange:function(e){return n(e)}}),(0,a.jsxs)(y,{ref:_,placeholder:"",children:[(0,a.jsx)("option",{value:"created_at_desc",children:"\u6295\u7a3f\u65e5\u6642\u9806"}),(0,a.jsx)("option",{value:"option2",children:"Option 2"}),(0,a.jsx)("option",{value:"option3",children:"Option 3"})]})]}),p,(0,a.jsx)("div",{className:k().grid,children:u.length>0&&u.map((function(e){return(0,a.jsx)(R.Z,{id:e.id,title:e.title,content:e.content,orgUrl:e.orgUrl,favCount:e.favCount,favedUid:p},e.id)}))})]})})}},2844:function(e){e.exports={page:"index_page__r8Aeo",search:"index_search__d_oGI","search-detail":"index_search-detail__p47Q4",grid:"index_grid__azm5i"}},8652:function(){}},function(e){e.O(0,[612,651,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
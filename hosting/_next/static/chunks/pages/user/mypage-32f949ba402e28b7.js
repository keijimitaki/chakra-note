(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{5697:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/mypage",function(){return t(9925)}])},9925:function(e,n,t){"use strict";t.r(n);var r=t(4051),a=t.n(r),o=t(5893),s=t(7294),c=t(179),u=t(1153),i=t(5321),l=t(5857),d=t.n(l),f=t(7043),p=t(8527),h=t(4612),v=t(6723),x=t(3854),g=t(9789),m=t(5651);function w(e,n,t,r,a,o,s){try{var c=e[o](s),u=c.value}catch(i){return void t(i)}c.done?n(u):Promise.resolve(u).then(r,a)}function _(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function s(e){w(o,r,a,s,c,"next",e)}function c(e){w(o,r,a,s,c,"throw",e)}s(void 0)}))}}function b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var y={displayName:"",password:""};n.default=function(){var e=(0,s.useState)(y),n=e[0],t=e[1],r=n.displayName,l=n.password,w=(0,s.useContext)(g.S),j=(0,s.useState)(null),S=j[0],k=j[1],N=(0,s.useState)(""),C=N[0],O=N[1],U=(0,s.useState)(""),E=U[0],P=U[1];!function(){var e=_(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,(0,c.cB)(E,l);case 4:r=e.sent,console.log(r),t(y),e.next=19;break;case 9:e.prev=9,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/wrong-password"===e.t1?14:"auth/user-not-found"===e.t1?16:18;break;case 14:return alert("incorrect password for email"),e.abrupt("break",19);case 16:return alert("no user associated with this email"),e.abrupt("break",19);case 18:console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,9]])})))}();(0,s.useEffect)((function(){_(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,x.Aj)(c.I8,(function(e){if(e){var n=e.uid;k(n),_(a().mark((function t(){var r,o,s,c,l,d,p;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,i.ad)(),o=(0,i.JU)(r,"users",n),t.next=4,(0,i.QT)(o);case 4:s=t.sent,console.log("userSnap:",s),P(e.email),s.exists()?(c=s.data(),l=new f.Z(n,e.email,c.display_name,c.prof_image_url,c.created_at),console.log("userSnap:",c),O(l.displayName),w.setCurrentUser(l)):console.log("No such userSnap"),d=(0,u.cF)(),p=(0,i.IO)((0,i.hJ)(r,"articles"),(0,i.ar)("author_uid","==",n),(0,i.Xo)("created_at","desc")),(0,i.PL)(p).then((function(e){var n=new Array;e.docs.forEach((function(e){console.log(e.id);var t={};t.id=e.id,t.title=e.data().title,t.content=e.data().content,t.orgUrl=e.data().url,t.favCount=e.data().fav_count,(0,u.Jt)((0,u.iH)(d,"images/".concat(e.id))).then((function(e){})).catch((function(e){})),n.push(t)})),Z(n)}));case 11:case"end":return t.stop()}}),t)})))()}else console.log("onAuthStateChanged:","User is signed out")}));case 1:case"end":return e.stop()}}),e)})))()}),[]);var A=function(){var e=_(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),(0,i.ad)(),(0,x.Aj)(c.I8,(function(e){if(e){var n=e.uid;_(a().mark((function e(){var t,o,s,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,i.ad)(),o=(0,i.JU)(t,"users",n),e.next=4,(0,i.QT)(o);case 4:return s=e.sent,console.log("userSnap:",s),e.next=8,(0,i.r7)(o,{display_name:r,updated_at:(0,i.Bt)()});case 8:e.sent,s.exists()?(c=s.data(),console.log("userSnap:",c),console.log(r),O(r),u=new f.Z(n,c.email,r,c.profImageUrl,c.createdAt),console.log("userSnap:",c),console.log(c.displayName),O(c.displayName),w.setCurrentUser(u)):console.log("No such userSnap");case 10:case"end":return e.stop()}}),e)})))()}else console.log("onAuthStateChanged:","User is signed out")}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),I=(0,s.useState)([]),J=I[0],Z=I[1];return(0,s.useEffect)((function(){}),[]),(0,o.jsx)("div",{children:(0,o.jsx)("form",{onSubmit:A,children:(0,o.jsxs)(p.Kq,{spacing:8,align:"stretch",children:[(0,o.jsx)(p.xv,{mt:"100px",children:"\u30e6\u30fc\u30b6\u30fc\u60c5\u5831"}),(0,o.jsxs)(p.xu,{h:"60px",children:[(0,o.jsx)(p.xv,{children:"\u30e6\u30fc\u30b6\u30fc\u540d"}),(0,o.jsx)(h.II,{placeholder:"",size:"md",defaultValue:C,name:"displayName",onChange:function(e){var r=e.target,a=r.name,o=r.value;console.log(e.target,a),t(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){b(e,n,t[n])}))}return e}({},n,b({},a,o)))}})]}),(0,o.jsxs)(p.xu,{h:"60px",children:[(0,o.jsx)(p.xv,{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),E]}),(0,o.jsx)(p.xu,{h:"60px",children:(0,o.jsx)(v.zx,{type:"submit",children:"\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u66f4\u65b0"})}),(0,o.jsxs)(p.xu,{h:"200px",children:[" ",(0,o.jsx)("hr",{})]}),(0,o.jsx)("div",{className:d().grid,children:J.length>0&&J.map((function(e){return(0,o.jsx)(m.Z,{id:e.id,title:e.title,content:e.content,orgUrl:e.orgUrl,favCount:e.favCount,favedUid:S},e.id)}))})]})})})}},5857:function(e){e.exports={button:"mypage_button__mZbCG",grid:"mypage_grid__ZXlJq"}}},function(e){e.O(0,[612,153,651,774,888,179],(function(){return n=5697,e(e.s=n);var n}));var n=e.O();_N_E=n}]);